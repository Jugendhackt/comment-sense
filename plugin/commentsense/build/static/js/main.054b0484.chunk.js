(window.webpackJsonpcommentsense=window.webpackJsonpcommentsense||[]).push([[0],{18:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACxUlEQVRYhe2XTUhUURiG3+/cm1qrwtSZ68/MFcFF7TSCkAhyE1hTUOCiEIN0fpJaBNEmh3LjJiXKGSWqZVRYRIHgQgohYhLa68zV0DvOlFQWhvNzvjZN6OSMM8NEm3mX5/vO+z6cc+7hXEKBCrotBwSLQQDfWeJO46g5WYiPKGTSvFs7JFhMgxEgRoQEXgXdWlshXpTvhGCP1iAUBEDw6SOmFwBCTuuAIOolJA/afJFQPn55rYDZo+0SCp4DNG2vNm+kxnVL+DqAKQnlpXHZvvufADBA6wruA1DWKNZFXshUjbyQSoXoArCKWOzxlBdq0QEWXNZrBBwFS8e+kU8/0uv1Q4s/OZ5wgNFsj2i3OcftzQnA8GgOBvUz5Gndvzyfqa/xXjQiFdEB4Kzh0i7m4r0t5ZyzZr9KyltmuqL7l0ZzMQ06azsE8TgLbm+8G35TMMCip7YyLjkAYEL3me5cwlMynFo/BFyqFC31/sWlTH0Zt+B9T8uOuOQnAC+sJK2X8gkHALvFvEmMQILk09m+pvK8Afaq4VsA9FiSzrSOzcTzBSAvJJeXnQNQpSbWhvICMFzWHmZ0S0WcaB4zP+cbnpI+PP9VKuIUgC7DpXVvCZo+EPJYD5OkSWLutPvDzwoN3yjDqXWC8ECA22y+8MzG2qYVmHPXNZGk18w0UKxwAND95iMGj0jQ+GyfpSojgCrZAWBV9y8NFCs8pYWa8FWAl9Wk8GzK3NRFbAPhndGrtQcFON0kkcSH7c7ElBdqQ0Q7kj5OUewEIFlSMiOAwmIwCemHwEMC0j+dyjKVjwGYyAZQHa2qEEDqbbDyp8AgMF7EYuvDGQF+XxjHtzI23NpytuC/xFLPdm2nVNCDpJgqAZQASgAlgBLAfwfI+Q8GElEInAy5tLqsfYw9DCQUKvtWXABFXIDkQQK3btOZYObzNv/HL7nY/gKNLAOQes60yQAAAABJRU5ErkJggg=="},19:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACNElEQVRYhe2Xv2tTURzFz/e+l0RaikKFmkSNaSuI2KEUQR1EnIX+Ay6KxJggCI4ubg4WxBTTODsL/hgcCoripg669kei1LRaoUoVtMn7Hodim9i8eF/SDELOeO+55/u59355lydoUXOZPUeNmtsw+E4PNwfvlqdbyZFWFpUysRMAn1PFgUAE9DyRU0P58suOA8ylYvuNK29B7txYTxCCVQNvNDH1aT5IngliLqdiPY6DJyB6UQu/fgo9Cne6eOXAro4AEJA1R+4RGAIY2jovLsA4flUePLsOd9sB3l+KXgN4BkCkiS0C4bHE52ieltdrZSpmY+OivE+IY+OnoCqKq8lCOdc2wGx64IgrzisCO2yKbwbTU4PTg3cWX7QMsJCN91cU7wAdgOXuN0QQRr66KiP7Cgsf/Wy+PfA6NRaqKB8R3B24OAAIBGRvVfTxzOVh377xBeh3yzlAxgQIBy6+qTAEhx3vx2QggGI6epGUCwCbdbydiAgg50rp2PlG01t6YD4bPSmKpy0de3NVDHg8MbX4xhdgNrN32KHOAGAjuPZEhchy1dGRg5NLy39G667AVY4D0O0vDhBiQPa5nsnWjtcBqDApAm2vUGPJOkQIrM+v+2aHaG54oodAjFIQ+iugzwag9ugIrNZOGfLhz7XKLT9/UxUz8RWQ9i8dNZksLJX+ZQv0HHdCXYAuQBegC9AF+H8AhPwSIFeNhL/ZGK1/oWjMWShzAJs/y0SVRicS+Q8rNrm/AQv/vs3nBvV8AAAAAElFTkSuQmCC"},29:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAfZJREFUWIXl1k2IjWEUB/DfjJmp8f0x2DDZDGXMjbKRslEUKStbCyyUBVnbIxqFfKyslIWdhZVEI18bJd9DoSRKY4ZBY1ice3PTvd7nvb2vkv/mWTz/53/+7/ucc57D/462Fs+swzZUMA8juIZjeJNHbErO4FNxAQcxipsYwitswWF8xX18yamdhPN4gv4m5k6KPzCMhUUHr+A7lmfw5uAxzhRt4ACuJnJ34m0KsT2HgaXiblNwDwswvUgD3ZhI5E5W18wqy2PgI+YncheJKhgr0sCw7ASsYRUe4keRBkaxEjMSuFsxO0U0j4EB3PDrfv+EK6mieQx0iCbzKYH7NKd2EjbjM/Zn8DbgBY4WbQAe4XkG54RIvu4yDAxUxStN9rvwGnvLCF7DJdwSPf93DOIdZpVpYIX4C6sb7E3gbB6xVjK19sg0arMfxHxQqoGe6jreYG9ctOHS0CemoAfobLA/iPfYpLVxryHasREXxUAyhN4m3C5RhpO4gx2Y1mrgDuzCs6rgZdGMUr6sXyTjmBhYD2FunuC9uC3a7hEsyXO4DjOxBy9F8q5POdQjut11xSVUN46LiXltFvmUeMtbvrsmaMO5qnbT6usU7/72goPXsFg0sTX1rurRJ+b+b+JFKwPLsBuniUyvxwj2lRS4Hnf/Qox/BD8B/s1fW7jCzVUAAAAASUVORK5CYII="},34:function(e,t,n){e.exports=n(56)},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(6),s=n(11),c=n.n(s),o=n(3),m=n(9),u=n(29),i=n.n(u);var g=function(e){return r.a.createElement("nav",{className:"navbar sticky-top navbar-dark bg-primary mb-3"},r.a.createElement("div",{className:"w-100 d-flex justify-content-between align-items-center"},r.a.createElement(l.b,{to:"/index.html"},r.a.createElement("span",{className:"navbar-brand"},e.lang.navbarBrand)),r.a.createElement(l.b,{to:"/user/"},r.a.createElement("img",{src:i.a,alt:e.lang.settings,height:"32px",width:"32px"}))))},d=n(10),A=n.n(d),f="http://commentsense.de";var E=Object(m.f)(function(e){var t=Object(a.useState)(e.username),n=Object(o.a)(t,2),l=n[0],s=n[1],c=Object(a.useState)(e.password),m=Object(o.a)(c,2),u=m[0],i=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("small",{className:"text-muted"},e.lang.fillAllFields),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"".concat(e.lang.username,":")),r.a.createElement("input",{className:"form-control",value:l,onChange:function(e){return s(e.target.value)},placeholder:e.lang.yourUsername})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"".concat(e.lang.password,":")),r.a.createElement("input",{className:"form-control",value:u,onChange:function(e){return i(e.target.value)},type:"password",placeholder:e.lang.yourPassword})),r.a.createElement("div",{className:"w-100 d-flex justify-content-center align-items-center"},r.a.createElement("button",{className:"btn btn-primary m-2",onClick:function(){l&&u&&fetch("".concat(f,"/users/login/"),{method:"POST",body:JSON.stringify({userName:l,password:u})}).then(function(e){return e.json()}).then(function(t){"login data valid"===t.status?(chrome.storage.local.set({username:l,password:u}),A.a.alert(e.lang.loginSuccess,function(){chrome.runtime.reload()})):A.a.alert(e.lang.loginDataNotFound)}).catch(function(t){e.history.push("/error/")})}},e.lang.login),r.a.createElement("button",{className:"btn btn-primary m-2",onClick:function(){chrome.tabs.create({url:"http://commentsense.de"})}},e.lang.createAccount)))});var h=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,e.lang.alreadyLoggedIn,e.username),r.a.createElement("button",{className:"btn btn-primary m-2",onClick:function(){A.a.confirm(e.lang.confirmLogout,function(e){e&&(chrome.storage.local.remove(["username","password"]),chrome.runtime.reload())})}},e.lang.logout))};var b=function(e){return r.a.createElement(r.a.Fragment,null,e.loggedIn?r.a.createElement(h,{lang:e.lang,username:e.username}):r.a.createElement(E,{lang:e.lang,username:e.username,password:e.password}))},v=n(17),p=n.n(v),w=n(18),N=n.n(w),y=n(19),O=n.n(y);var C=Object(m.f)(function(e){var t=Object(a.useState)(e.voted),n=Object(o.a)(t,2),l=n[0],s=n[1],c=p.a.v4(),m=p.a.v4();return r.a.createElement("div",{className:"list-group-item list-group-item-action mb-4 border border-primary"},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{className:"mb-1"},e.title),r.a.createElement("small",{className:"text-muted"},e.date)),r.a.createElement("p",{className:"mb-1"},e.content),r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("small",{className:"text-muted"},e.creator),r.a.createElement("div",{style:"Keine Kommentare"===e.title?{display:"none"}:null},r.a.createElement("span",{id:m},e.votes),r.a.createElement("img",{src:e.voted?O.a:N.a,onClick:function(){var t;t=0===l?1:-1,fetch("".concat(f,"/comments/vote/"),{method:"PATCH",body:JSON.stringify({userName:e.username,password:e.password,id:e.id,vote:t})}).then(function(e){return e.json()}).then(function(n){var a=parseInt(document.getElementById(m).textContent);1===t&&"successfully voted"===n.status?(document.getElementById(c).src=O.a,document.getElementById(m).textContent=a+1,s(1)):-1===t&&"successfully unvoted"===n.status?(document.getElementById(c).src=N.a,document.getElementById(m).textContent=a-1,s(0)):e.history.push("/error/")}).catch(function(t){e.history.push("/error/")})},id:c,alt:e.voted?e.lang.unlike:e.lang.like}))))});var j=Object(m.f)(function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),l=n[0],s=n[1];return Object(a.useEffect)(function(){new Promise(function(e){chrome.tabs.query({currentWindow:!0,active:!0},function(t){e(t[0].url)})}).then(function(t){var n;n=e.loggedIn?"".concat(f,"/comments/site='").concat(t,"',name='").concat(e.username,"'"):"".concat(f,"/comments/site='").concat(t,"'"),fetch(n).then(function(e){return e.json()}).then(function(e){s(e.comments)}).catch(function(t){e.history.push("/error/")})})},[]),r.a.createElement(r.a.Fragment,null,l.map(function(t){return r.a.createElement(C,{title:t.headline,date:t.date,content:t.content,creator:t.userName,username:e.username,password:e.password,votes:t.votes,voted:t.voted,id:t.id,lang:e.lang,loggedIn:e.loggedIn})}))});var S=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,e.lang.error),r.a.createElement("p",null,e.lang.serverNotReachable))};var x=function(e){return r.a.createElement("main",{className:"container"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/index.html",render:function(t){return r.a.createElement(j,Object.assign({lang:e.lang},t,{loggedIn:e.loggedIn,username:e.username,password:e.password}))}}),r.a.createElement(m.a,{path:"/user/",render:function(t){return r.a.createElement(b,Object.assign({lang:e.lang,loggedIn:e.loggedIn,username:e.username,password:e.password},t))}}),r.a.createElement(m.a,{path:"/error/",render:function(t){return r.a.createElement(S,Object.assign({lang:e.lang},t))}})))},B=n(58);var F=Object(m.f)(function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),l=n[0],s=n[1],c=Object(a.useState)(""),m=Object(o.a)(c,2),u=m[0],i=m[1];return r.a.createElement("div",{className:"navbar-dark bg-dark p-2 border border-primary"},r.a.createElement("div",{className:"w-100 d-flex flex-column justify-content-center align-items-center"},r.a.createElement("h2",null,e.lang.yourComment),r.a.createElement("small",{className:"text-muted"},e.lang.fillAllFields)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,e.lang.title),r.a.createElement("input",{className:"form-control",placeholder:e.lang.titleOfComment,value:l,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,e.lang.content),r.a.createElement("textarea",{className:"form-control",placeholder:e.lang.contentOfComment,value:u,onChange:function(e){return i(e.target.value)},rows:"8",cols:"30"})),r.a.createElement("div",{className:"w-100 d-flex justify-content-center"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){chrome.tabs.query({active:!0,currentWindow:!0},function(t){var n=t[0].url;fetch("".concat(f,"/comments/"),{method:"POST",body:JSON.stringify({userName:e.username,password:e.password,url:n,headline:l,content:u})}).then(function(e){return e.json()}).then(function(t){"comment successfully posted"===t.status&&A.a.alert(e.lang.createCommentSuccess,function(){window.location.reload()})}).catch(function(t){e.history.push("/error/")})})}},e.lang.sendComment))))});var I=Object(m.f)(function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),l=n[0],s=n[1];return r.a.createElement("div",{className:"footer-container"},r.a.createElement(B.a,{isOpen:l},r.a.createElement(F,{lang:e.lang,username:e.username,password:e.password})),r.a.createElement("footer",{className:"footer navbar-dark bg-primary d-flex justify-content-center align-items-center"},r.a.createElement("button",{className:"btn btn-dark",onClick:function(){e.loggedIn?s(!l):e.history.push("/user/")}},l?e.lang.back:e.lang.createComment)))}),U={navbarBrand:"CommentSense",settings:"Einstellungen",like:"Like",unlike:"Dislike",username:"Nickname",yourUsername:"Dein Nickname",password:"Passwort",yourPassword:"Dein Passwort",login:"Login",loginSuccess:"Erfolgreich angemeldet!",emptyInput:"Nicht alle Felder ausgef\xfcllt!",serverNotReachable:"Server ist nicht erreichbar!",alreadyLoggedIn:"Du bist bereits eingeloggt als: ",logout:"Ausloggen",confirmLogout:"Willst du dich wirklich ausloggen?",logoutSuccess:"Erfolgreich ausgeloggt!",loginDataNotFound:"Nickname oder Passwort ist falsch!",createCommentSuccess:"Kommentar erfolgreich erstellt!",createCommentFail:"Kommentar erstellen fehlgeschlagen!",error:"Fehler",loading:"Laden...",createAccount:"Account erstellen",createComment:"Kommentar erstellen",sendComment:"Kommentar senden",back:"Zur\xfcck",yourComment:"Dein Kommentar",fillAllFields:"Bitte f\xfclle alle Felder aus",title:"Titel",titleOfComment:"Titel des Kommentars",content:"Kommentar",contentOfComment:"Dein Kommentar"};var k=Object(m.f)(function(e){var t=Object(a.useState)(void 0),n=Object(o.a)(t,2),l=n[0],s=n[1],c=Object(a.useState)(void 0),m=Object(o.a)(c,2),u=m[0],i=m[1],d=Object(a.useState)(!1),A=Object(o.a)(d,2),E=A[0],h=A[1],b=Object(a.useState)(!0),v=Object(o.a)(b,2),p=v[0],w=v[1],N=navigator.language;function y(){switch(N){case"de-DE":case"DE-de":case"de":default:return U}}return Object(a.useEffect)(function(){chrome.storage.local.get(["username","password"],function(t){t.username&&t.password?fetch("".concat(f,"/users/login/"),{method:"POST",body:JSON.stringify({userName:t.username,password:t.password})}).then(function(e){return e.json()}).then(function(e){"login data valid"===e.status?(s(t.username),i(t.password),h(!0),w(!1)):(w(!1),h(!1))}).catch(function(t){e.history.push("/error/")}):(h(!1),w(!1))})},[]),p?r.a.createElement("div",{className:"w-100 h-100 d-flex justify-content-center align-items-center",style:{height:"150px"}},r.a.createElement("div",{className:"spinner-border m-3",style:{width:"7.5em",height:"7.5em"},role:"status"},r.a.createElement("span",{className:"sr-only"}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{lang:y()}),r.a.createElement(x,{lang:y(),loggedIn:E,username:l,password:u}),r.a.createElement(I,{lang:y(),loggedIn:E,username:l,password:u}))});n(52),n(54),n(55);c.a.render(r.a.createElement(l.a,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.054b0484.chunk.js.map